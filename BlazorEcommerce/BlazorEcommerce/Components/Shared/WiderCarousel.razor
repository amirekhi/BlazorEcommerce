@using BlazorEcommerce.DTOs.Entities
@using ClassLibrary1.Entities
@rendermode InteractiveServer

<div class="flex flex-col md:ml-20 items-start  gap-2 md:px-6 py-8 relative">
    <!-- LEFT: Title + Description -->
      <div class=" text-left px-4">
        <h2 class="text-3xl font-bold text-black mb-1">@Title <span class="text-3xl font-bold text-gray-500">@Description</span></h2>
        
    </div>

    <!-- RIGHT: Carousel -->
    <div class="relative w-full overflow-hidden">
        <button @onclick="ScrollLeft"
                class="absolute left-2 top-1/2 transform -translate-y-1/2 z-30 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition">
            &#10094;
        </button>

        <div @ref="carouselRef"
             class="flex gap-6 overflow-x-auto scroll-smooth py-4 hide-scrollbar snap-x snap-mandatory px-6">
            @foreach (var product in Products)
            {
                <a href="/Product/@product.Id" class="no-underline text-inherit">
                <div class="relative min-w-[300px] sm:min-w-[340px] md:min-w-[480px] h-[500px] rounded-2xl overflow-hidden  transform hover:scale-[1.01] duration-500    shadow-[0_0_50px_rgba(0,0,0,0.3)] hover:shadow-[0_0_10px_rgba(0,0,0,0.6)]  transition   group  ">
                    <img src="@product.ImageUrl"
                         alt="@product.Name"
                         class="absolute inset-0 w-full h-full object-cover opacity-95  transition-transform duration-500" />

                

                    <div class="relative z-20 h-full flex flex-col justify-start p-4 text-black">
                        <h2 class="text-[28px] font-semibold mb-1">@product.Name</h2>
                        <p class="text-[17px] text-gray-500 mb-3 max-w-[300px]">
                            @product.Description?.Substring(0, Math.Min(60, product.Description.Length))...
                        </p>
                        <div class="flex justify-between items-center">
                            <span class="text-lg font-bold">$@product.Price</span>                       
                        </div>
                    </div>
                </div>
                </a>
            }
        </div>

        <button @onclick="ScrollRight"
                class="absolute right-2 top-1/2 transform -translate-y-1/2 z-30 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition">
            &#10095;
        </button>
    </div>
</div>

@code {
    [Parameter]
    public List<ProductDTO> Products { get; set; }

    [Parameter]
    public string Title { get; set; }

    [Parameter]
    public string Description { get; set; }

    private ElementReference carouselRef;


    private async Task ScrollLeft()
    {
      
        await JS.InvokeVoidAsync("carouselScroll", carouselRef, -1);
    }

    private async Task ScrollRight()
    {
        await JS.InvokeVoidAsync("carouselScroll", carouselRef, 1);
    }

    [Inject]
    private IJSRuntime JS { get; set; }
}
